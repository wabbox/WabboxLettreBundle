(function(d,c,e){var b={index:0,initialized:false},a={init:function(f){return this.each(function(){b=d.extend(b,f);b.$w=d(c),b.$topbar=d("nav.top-bar"),b.$section=b.$topbar.find("section"),b.$titlebar=b.$topbar.children("ul:first");var g=d("<div class='top-bar-js-breakpoint'/>").appendTo("body");b.breakPoint=g.width();g.remove();if(!b.initialized){a.assemble();b.initialized=true}if(!b.height){a.largestUL()}if(b.$topbar.parent().hasClass("fixed")){d("body").css("padding-top",b.$topbar.outerHeight())}d(".top-bar .toggle-topbar").die("click.fndtn").live("click.fndtn",function(h){h.preventDefault();if(a.breakpoint()){b.$topbar.toggleClass("expanded");b.$topbar.css("min-height","")}if(!b.$topbar.hasClass("expanded")){b.$section.css({left:"0%"});b.$section.find(">.name").css({left:"100%"});b.$section.find("li.moved").removeClass("moved");b.index=0}});d(".top-bar .has-dropdown>a").die("click.fndtn").live("click.fndtn",function(j){if(Modernizr.touch||a.breakpoint()){j.preventDefault()}if(a.breakpoint()){var i=d(this),h=i.closest("li");b.index+=1;h.addClass("moved");b.$section.css({left:-(100*b.index)+"%"});b.$section.find(">.name").css({left:100*b.index+"%"});i.siblings("ul").height(b.height+b.$titlebar.outerHeight(true));b.$topbar.css("min-height",b.height+b.$titlebar.outerHeight(true)*2)}});d(c).on("resize.fndtn.topbar",function(){if(!a.breakpoint()){b.$topbar.css("min-height","")}});d(".top-bar .has-dropdown .back").die("click.fndtn").live("click.fndtn",function(k){k.preventDefault();var j=d(this),i=j.closest("li.moved"),h=i.parent();b.index-=1;b.$section.css({left:-(100*b.index)+"%"});b.$section.find(">.name").css({left:100*b.index+"%"});if(b.index===0){b.$topbar.css("min-height",0)}setTimeout(function(){i.removeClass("moved")},300)})})},breakpoint:function(){return b.$w.width()<b.breakPoint},assemble:function(){b.$section.detach();b.$section.find(".has-dropdown>a").each(function(){var f=d(this),h=f.siblings(".dropdown"),g=d('<li class="title back js-generated"><h5><a href="#"></a></h5></li>');g.find("h5>a").html(f.html());h.prepend(g)});b.$section.appendTo(b.$topbar)},largestUL:function(){var g=b.$topbar.find("section ul ul"),h=g.first(),f=0;g.each(function(){if(d(this).children("li").length>h.children("li").length){h=d(this)}});h.children("li").each(function(){f+=d(this).outerHeight(true)});b.height=f}};d.fn.foundationTopBar=function(f){if(a[f]){return a[f].apply(this,Array.prototype.slice.call(arguments,1))}else{if(typeof f==="object"||!f){return a.init.apply(this,arguments)}else{d.error("Method "+f+" does not exist on jQuery.foundationTopBar")}}}}(jQuery,this));