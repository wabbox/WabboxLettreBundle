(function(b){var a=false;b(document).on("click","a[data-reveal-id]",function(d){d.preventDefault();var c=b(this).attr("data-reveal-id");b("#"+c).reveal(b(this).data())});b.fn.reveal=function(c){var e=b(document),d={animation:"fadeAndPop",animationSpeed:300,closeOnBackgroundClick:true,dismissModalClass:"close-reveal-modal",open:b.noop,opened:b.noop,close:b.noop,closed:b.noop};c=b.extend({},d,c);return this.not(".reveal-modal.open").each(function(){var s=b(this),k=parseInt(s.css("top"),10),n=s.height()+k,m=false,i=b(".reveal-modal-bg"),l={open:{top:0,opacity:0,visibility:"visible",display:"block"},close:{top:k,opacity:1,visibility:"hidden",display:"none"}},h;if(i.length===0){i=b("<div />",{"class":"reveal-modal-bg"}).insertAfter(s);i.fadeTo("fast",0.8)}function o(){m=false}function t(){m=true}function q(){var u=b(".reveal-modal.open");if(u.length===1){a=true;u.trigger("reveal:close")}}function p(){if(!m){t();q();s.addClass("open");if(c.animation==="fadeAndPop"){l.open.top=e.scrollTop()-n;l.open.opacity=0;s.css(l.open);i.fadeIn(c.animationSpeed/2);s.delay(c.animationSpeed/2).animate({top:e.scrollTop()+k+"px",opacity:1},c.animationSpeed,function(){s.trigger("reveal:opened")})}if(c.animation==="fade"){l.open.top=e.scrollTop()+k;l.open.opacity=0;s.css(l.open);i.fadeIn(c.animationSpeed/2);s.delay(c.animationSpeed/2).animate({opacity:1},c.animationSpeed,function(){s.trigger("reveal:opened")})}if(c.animation==="none"){l.open.top=e.scrollTop()+k;l.open.opacity=1;s.css(l.open);i.css({display:"block"});s.trigger("reveal:opened")}}}function f(){var v=s.find(".flex-video"),u=v.find("iframe");if(u.length>0){u.attr("src",u.data("src"));v.fadeIn(100)}}s.bind("reveal:open.reveal",p);s.bind("reveal:open.reveal",f);function j(){if(!m){t();s.removeClass("open");if(c.animation==="fadeAndPop"){s.animate({top:e.scrollTop()-n+"px",opacity:0},c.animationSpeed/2,function(){s.css(l.close)});if(!a){i.delay(c.animationSpeed).fadeOut(c.animationSpeed,function(){s.trigger("reveal:closed")})}else{s.trigger("reveal:closed")}}if(c.animation==="fade"){s.animate({opacity:0},c.animationSpeed,function(){s.css(l.close)});if(!a){i.delay(c.animationSpeed).fadeOut(c.animationSpeed,function(){s.trigger("reveal:closed")})}else{s.trigger("reveal:closed")}}if(c.animation==="none"){s.css(l.close);if(!a){i.css({display:"none"})}s.trigger("reveal:closed")}a=false}}function r(){s.unbind(".reveal");i.unbind(".reveal");h.unbind(".reveal");b("body").unbind(".reveal")}function g(){var v=s.find(".flex-video"),u=v.find("iframe");if(u.length>0){u.data("src",u.attr("src"));u.attr("src","");v.fadeOut(100)}}s.bind("reveal:close.reveal",j);s.bind("reveal:closed.reveal",g);s.bind("reveal:opened.reveal reveal:closed.reveal",o);s.bind("reveal:closed.reveal",r);s.bind("reveal:open.reveal",c.open);s.bind("reveal:opened.reveal",c.opened);s.bind("reveal:close.reveal",c.close);s.bind("reveal:closed.reveal",c.closed);s.trigger("reveal:open");h=b("."+c.dismissModalClass).bind("click.reveal",function(){s.trigger("reveal:close")});if(c.closeOnBackgroundClick){i.css({cursor:"pointer"});i.bind("click.reveal",function(){s.trigger("reveal:close")})}b("body").bind("keyup.reveal",function(u){if(u.which===27){s.trigger("reveal:close")}})})}}(jQuery));